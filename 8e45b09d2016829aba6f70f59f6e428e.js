ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(h,m,y){"use strict";var M=h("./lib/oop"),k=h("./range").Range,$=h("./search").Search,v=h("./edit_session").EditSession,C=h("./search_highlight").SearchHighlight;function i(){}M.inherits(i,$),function(){this.enter=function(t,r){if(!r.needle)return!1;var l=t.getCursorPosition();this.displayOccurContent(t,r);var d=this.originalToOccurPosition(t.session,l);return t.moveCursorToPosition(d),!0},this.exit=function(t,r){var l=r.translatePosition&&t.getCursorPosition(),d=l&&this.occurToOriginalPosition(t.session,l);return this.displayOriginalContent(t),d&&t.moveCursorToPosition(d),!0},this.highlight=function(t,r){var l=t.$occurHighlight=t.$occurHighlight||t.addDynamicMarker(new C(null,"ace_occur-highlight","text"));l.setRegexp(r),t._emit("changeBackMarker")},this.displayOccurContent=function(t,r){this.$originalSession=t.session;var l=this.matchingLines(t.session,r),d=l.map(function(e){return e.content}),g=new v(d.join(`
`));g.$occur=this,g.$occurMatchingLines=l,t.setSession(g),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,g.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(g,r.re),g._emit("changeBackMarker")},this.displayOriginalContent=function(t){t.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(t,r){var l=t.$occurMatchingLines,d={row:0,column:0};if(!l)return d;for(var g=0;g<l.length;g++)if(l[g].row===r.row)return{row:g,column:r.column};return d},this.occurToOriginalPosition=function(t,r){var l=t.$occurMatchingLines;return!l||!l[r.row]?r:{row:l[r.row].row,column:r.column}},this.matchingLines=function(t,r){if(r=M.mixin({},r),!t||!r.needle)return[];var l=new $;return l.set(r),l.findAll(t).reduce(function(d,g){var e=g.start.row,s=d[d.length-1];return s&&s.row===e?d:d.concat({row:e,content:t.getLine(e)})},[])}}.call(i.prototype);var c=h("./lib/dom");c.importCssString(`.ace_occur-highlight {
    border-radius: 4px;
    background-color: rgba(87, 255, 8, 0.25);
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
    box-shadow: 0 0 4px rgb(91, 255, 50);
}
.ace_dark .ace_occur-highlight {
    background-color: rgb(80, 140, 85);
    box-shadow: 0 0 4px rgb(60, 120, 70);
}
`,"incremental-occur-highlighting"),m.Occur=i}),ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(h,m,y){var M=h("../config"),k=h("../occur").Occur,$={name:"occur",exec:function(t,r){var l=!!t.session.$occur,d=new k().enter(t,r);d&&!l&&c.installIn(t)},readOnly:!0},v=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(t){var r=t.session.$occur;!r||(r.exit(t,{}),t.session.$occur||c.uninstallFrom(t))},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(t){var r=t.session.$occur;!r||(r.exit(t,{translatePosition:!0}),t.session.$occur||c.uninstallFrom(t))},readOnly:!0}],C=h("../keyboard/hash_handler").HashHandler,i=h("../lib/oop");function c(){}i.inherits(c,C),function(){this.isOccurHandler=!0,this.attach=function(r){C.call(this,v,r.commands.platform),this.$editor=r};var t=this.handleKeyboard;this.handleKeyboard=function(r,l,d,g){var e=t.call(this,r,l,d,g);return e&&e.command?e:void 0}}.call(c.prototype),c.installIn=function(t){var r=new this;t.keyBinding.addKeyboardHandler(r),t.commands.addCommands(v)},c.uninstallFrom=function(t){t.commands.removeCommands(v);var r=t.getKeyboardHandler();r.isOccurHandler&&t.keyBinding.removeKeyboardHandler(r)},m.occurStartCommand=$}),ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(h,m,y){var M=h("../config"),k=h("../lib/oop"),$=h("../keyboard/hash_handler").HashHandler,v=h("./occur_commands").occurStartCommand;m.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(i,c){M.loadModule(["core","ace/incremental_search"],function(t){var r=t.iSearch=t.iSearch||new t.IncrementalSearch;r.activate(i,c.backwards),c.jumpToFirstMatch&&r.next(c)})},readOnly:!0},{name:"iSearchBackwards",exec:function(i,c){i.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(i,c){i.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(i){i.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],m.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(i){i.cancelSearch(!0)}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(i,c){c.useCurrentOrPrevSearch=!0,i.next(c)}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(i,c){c.useCurrentOrPrevSearch=!0,c.backwards=!0,i.next(c)}},{name:"extendSearchTerm",exec:function(i,c){i.addString(c)}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(i){i.addString(" ")}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(i){i.removeChar()}},{name:"confirmSearch",bindKey:"return",exec:function(i){i.deactivate()}},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(i){i.deactivate(!0)}},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(i){var c=k.mixin({},i.$options);i.deactivate(),v.exec(i.$editor,c)}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(i){var c=i.$editor,t=c.selection.getRangeOfMovements(function(l){l.moveCursorWordRight()}),r=c.session.getTextRange(t);i.addString(r)}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(i){var c=i.$editor,t=c.selection.getRangeOfMovements(function(l){l.moveCursorRight()}),r=c.session.getTextRange(t);i.addString(r)}},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(i){i.$editor.execCommand("recenterTopBottom")}},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(i){var c=i.$editor,t=c.session.$isearchHighlight,r=t&&t.cache?t.cache.reduce(function(l,d){return l.concat(d||[])},[]):[];i.deactivate(!1),r.forEach(c.selection.addRange.bind(c.selection))}},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(i){i.convertNeedleToRegExp()}}].map(function(i){return i.readOnly=!0,i.isIncrementalSearchCommand=!0,i.scrollIntoView="animate-cursor",i});function C(i){this.$iSearch=i}k.inherits(C,$),function(){this.attach=function(c){var t=this.$iSearch;$.call(this,m.iSearchCommands,c.commands.platform),this.$commandExecHandler=c.commands.on("exec",function(r){if(!r.command.isIncrementalSearchCommand)return t.deactivate();r.stopPropagation(),r.preventDefault();var l=c.session.getScrollTop(),d=r.command.exec(t,r.args||{});return c.renderer.scrollCursorIntoView(null,.5),c.renderer.animateScrolling(l),d})},this.detach=function(c){!this.$commandExecHandler||(c.commands.off("exec",this.$commandExecHandler),delete this.$commandExecHandler)};var i=this.handleKeyboard;this.handleKeyboard=function(c,t,r,l){if((t===1||t===8)&&r==="v"||t===1&&r==="y")return null;var d=i.call(this,c,t,r,l);if(d&&d.command)return d;if(t==-1){var g=this.commands.extendSearchTerm;if(g)return{command:g,args:r}}return!1}}.call(C.prototype),m.IncrementalSearchKeyboardHandler=C}),ace.define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(h,m,y){"use strict";var M=h("./lib/oop"),k=h("./range").Range,$=h("./search").Search,v=h("./search_highlight").SearchHighlight,C=h("./commands/incremental_search_commands"),i=C.IncrementalSearchKeyboardHandler;function c(){this.$options={wrap:!1,skipCurrent:!1},this.$keyboardHandler=new i(this)}M.inherits(c,$);function t(n){return n instanceof RegExp}function r(n){var a=String(n),o=a.indexOf("/"),f=a.lastIndexOf("/");return{expression:a.slice(o+1,f),flags:a.slice(f+1)}}function l(n,a){try{return new RegExp(n,a)}catch(o){return n}}function d(n){return l(n.expression,n.flags)}(function(){this.activate=function(n,a){this.$editor=n,this.$startPos=this.$currentPos=n.getCursorPosition(),this.$options.needle="",this.$options.backwards=a,n.keyBinding.addKeyboardHandler(this.$keyboardHandler),this.$originalEditorOnPaste=n.onPaste,n.onPaste=this.onPaste.bind(this),this.$mousedownHandler=n.on("mousedown",this.onMouseDown.bind(this)),this.selectionFix(n),this.statusMessage(!0)},this.deactivate=function(n){this.cancelSearch(n);var a=this.$editor;a.keyBinding.removeKeyboardHandler(this.$keyboardHandler),this.$mousedownHandler&&(a.off("mousedown",this.$mousedownHandler),delete this.$mousedownHandler),a.onPaste=this.$originalEditorOnPaste,this.message("")},this.selectionFix=function(n){n.selection.isEmpty()&&!n.session.$emacsMark&&n.clearSelection()},this.highlight=function(n){var a=this.$editor.session,o=a.$isearchHighlight=a.$isearchHighlight||a.addDynamicMarker(new v(null,"ace_isearch-result","text"));o.setRegexp(n),a._emit("changeBackMarker")},this.cancelSearch=function(n){var a=this.$editor;return this.$prevNeedle=this.$options.needle,this.$options.needle="",n?(a.moveCursorToPosition(this.$startPos),this.$currentPos=this.$startPos):a.pushEmacsMark&&a.pushEmacsMark(this.$startPos,!1),this.highlight(null),k.fromPoints(this.$currentPos,this.$currentPos)},this.highlightAndFindWithNeedle=function(n,a){if(!this.$editor)return null;var o=this.$options;if(a&&(o.needle=a.call(this,o.needle||"")||""),o.needle.length===0)return this.statusMessage(!0),this.cancelSearch(!0);o.start=this.$currentPos;var f=this.$editor.session,S=this.find(f),p=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();return S&&(o.backwards&&(S=k.fromPoints(S.end,S.start)),this.$editor.selection.setRange(k.fromPoints(p?this.$startPos:S.end,S.end)),n&&(this.$currentPos=S.end),this.highlight(o.re)),this.statusMessage(S),S},this.addString=function(n){return this.highlightAndFindWithNeedle(!1,function(a){if(!t(a))return a+n;var o=r(a);return o.expression+=n,d(o)})},this.removeChar=function(n){return this.highlightAndFindWithNeedle(!1,function(a){if(!t(a))return a.substring(0,a.length-1);var o=r(a);return o.expression=o.expression.substring(0,o.expression.length-1),d(o)})},this.next=function(n){return n=n||{},this.$options.backwards=!!n.backwards,this.$currentPos=this.$editor.getCursorPosition(),this.highlightAndFindWithNeedle(!0,function(a){return n.useCurrentOrPrevSearch&&a.length===0?this.$prevNeedle||"":a})},this.onMouseDown=function(n){return this.deactivate(),!0},this.onPaste=function(n){this.addString(n)},this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(!1,function(n){return t(n)?n:l(n,"ig")})},this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(!1,function(n){return t(n)?r(n).expression:n})},this.statusMessage=function(n){var a=this.$options,o="";o+=a.backwards?"reverse-":"",o+="isearch: "+a.needle,o+=n?"":" (not found)",this.message(o)},this.message=function(n){this.$editor.showCommandLine&&(this.$editor.showCommandLine(n),this.$editor.focus())}}).call(c.prototype),m.IncrementalSearch=c;var g=h("./lib/dom");g.importCssString&&g.importCssString(".ace_marker-layer .ace_isearch-result {  position: absolute;  z-index: 6;  box-sizing: border-box;}div.ace_isearch-result {  border-radius: 4px;  background-color: rgba(255, 200, 0, 0.5);  box-shadow: 0 0 4px rgb(255, 200, 0);}.ace_dark div.ace_isearch-result {  background-color: rgb(100, 110, 160);  box-shadow: 0 0 4px rgb(80, 90, 140);}","incremental-search-highlighting");var e=h("./commands/command_manager");(function(){this.setupIncrementalSearch=function(n,a){if(this.usesIncrementalSearch!=a){this.usesIncrementalSearch=a;var o=C.iSearchStartCommands,f=a?"addCommands":"removeCommands";this[f](o)}}}).call(e.CommandManager.prototype);var s=h("./editor").Editor;h("./config").defineOptions(s.prototype,"editor",{useIncrementalSearch:{set:function(n){this.keyBinding.$handlers.forEach(function(a){a.setupIncrementalSearch&&a.setupIncrementalSearch(this,n)}),this._emit("incrementalSearchSettingChanged",{isEnabled:n})}}})}),ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(h,m,y){"use strict";var M=h("../lib/dom");h("../incremental_search");var k=h("../commands/incremental_search_commands"),$=h("./hash_handler").HashHandler;m.handler=new $,m.handler.isEmacs=!0,m.handler.$id="ace/keyboard/emacs";var v=!1,C,i;m.handler.attach=function(e){v||(v=!0,M.importCssString("            .emacs-mode .ace_cursor{                border: 1px rgba(50,250,50,0.8) solid!important;                box-sizing: border-box!important;                background-color: rgba(0,250,0,0.9);                opacity: 0.5;            }            .emacs-mode .ace_hidden-cursors .ace_cursor{                opacity: 1;                background-color: transparent;            }            .emacs-mode .ace_overwrite-cursors .ace_cursor {                opacity: 1;                background-color: transparent;                border-width: 0 0 2px 2px !important;            }            .emacs-mode .ace_text-layer {                z-index: 4            }            .emacs-mode .ace_cursor-layer {                z-index: 2            }","emacsMode")),C=e.session.$selectLongWords,e.session.$selectLongWords=!0,i=e.session.$useEmacsStyleLineStart,e.session.$useEmacsStyleLineStart=!0,e.session.$emacsMark=null,e.session.$emacsMarkRing=e.session.$emacsMarkRing||[],e.emacsMark=function(){return this.session.$emacsMark},e.setEmacsMark=function(s){this.session.$emacsMark=s},e.pushEmacsMark=function(s,n){var a=this.session.$emacsMark;a&&this.session.$emacsMarkRing.push(a),!s||n?this.setEmacsMark(s):this.session.$emacsMarkRing.push(s)},e.popEmacsMark=function(){var s=this.emacsMark();return s?(this.setEmacsMark(null),s):this.session.$emacsMarkRing.pop()},e.getLastEmacsMark=function(s){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]},e.emacsMarkForSelection=function(s){var n=this.selection,a=this.multiSelect?this.multiSelect.getAllRanges().length:1,o=n.index||0,f=this.session.$emacsMarkRing,S=f.length-(a-o),p=f[S]||n.anchor;return s&&f.splice(S,1,"row"in s&&"column"in s?s:void 0),p},e.on("click",t),e.on("changeSession",c),e.renderer.$blockCursor=!0,e.setStyle("emacs-mode"),e.commands.addCommands(g),m.handler.platform=e.commands.platform,e.$emacsModeHandler=this,e.on("copy",this.onCopy),e.on("paste",this.onPaste)},m.handler.detach=function(e){e.renderer.$blockCursor=!1,e.session.$selectLongWords=C,e.session.$useEmacsStyleLineStart=i,e.off("click",t),e.off("changeSession",c),e.unsetStyle("emacs-mode"),e.commands.removeCommands(g),e.off("copy",this.onCopy),e.off("paste",this.onPaste),e.$emacsModeHandler=null};var c=function(e){e.oldSession&&(e.oldSession.$selectLongWords=C,e.oldSession.$useEmacsStyleLineStart=i),C=e.session.$selectLongWords,e.session.$selectLongWords=!0,i=e.session.$useEmacsStyleLineStart,e.session.$useEmacsStyleLineStart=!0,e.session.hasOwnProperty("$emacsMark")||(e.session.$emacsMark=null),e.session.hasOwnProperty("$emacsMarkRing")||(e.session.$emacsMarkRing=[])},t=function(e){e.editor.session.$emacsMark=null},r=h("../lib/keys").KEY_MODS,l={C:"ctrl",S:"shift",M:"alt",CMD:"command"},d=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];d.forEach(function(e){var s=0;e.split("-").forEach(function(n){s=s|r[l[n]]}),l[s]=e.toLowerCase()+"-"}),m.handler.onCopy=function(e,s){s.$handlesEmacsOnCopy||(s.$handlesEmacsOnCopy=!0,m.handler.commands.killRingSave.exec(s),s.$handlesEmacsOnCopy=!1)},m.handler.onPaste=function(e,s){s.pushEmacsMark(s.getCursorPosition())},m.handler.bindKey=function(e,s){if(typeof e=="object"&&(e=e[this.platform]),!!e){var n=this.commandKeyBinding;e.split("|").forEach(function(a){a=a.toLowerCase(),n[a]=s;var o=a.split(" ").slice(0,-1);o.reduce(function(f,S,p){var u=f[p-1]?f[p-1]+" ":"";return f.concat([u+S])},[]).forEach(function(f){n[f]||(n[f]="null")})},this)}},m.handler.getStatusText=function(e,s){var n="";return s.count&&(n+=s.count),s.keyChain&&(n+=" "+s.keyChain),n},m.handler.handleKeyboard=function(e,s,n,a){if(a!==-1){var o=e.editor;if(o._signal("changeStatus"),s==-1&&(o.pushEmacsMark(),e.count)){var f=new Array(e.count+1).join(n);return e.count=null,{command:"insertstring",args:f}}var S=l[s];if(S=="c-"||e.count){var p=parseInt(n[n.length-1]);if(typeof p=="number"&&!isNaN(p))return e.count=Math.max(e.count,0)||0,e.count=10*e.count+p,{command:"null"}}S&&(n=S+n),e.keyChain&&(n=e.keyChain+=" "+n);var u=this.commandKeyBinding[n];if(e.keyChain=u=="null"?n:"",!!u){if(u==="null")return{command:"null"};if(u==="universalArgument")return e.count=-4,{command:"null"};var b;if(typeof u!="string"&&(b=u.args,u.command&&(u=u.command),u==="goorselect"&&(u=o.emacsMark()?b[1]:b[0],b=null)),!(typeof u=="string"&&((u==="insertstring"||u==="splitline"||u==="togglecomment")&&o.pushEmacsMark(),u=this.commands[u]||o.commands.commands[u],!u))){if(!u.readOnly&&!u.isYank&&(e.lastCommand=null),!u.readOnly&&o.emacsMark()&&o.setEmacsMark(null),e.count){var p=e.count;if(e.count=0,!u||!u.handlesCount)return{args:b,command:{exec:function(w,E){for(var x=0;x<p;x++)u.exec(w,E)},multiSelectAction:u.multiSelectAction}};b||(b={}),typeof b=="object"&&(b.count=p)}return{command:u,args:b}}}}},m.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:`
`},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}},m.handler.bindKeys(m.emacsKeys),m.handler.addCommands({recenterTopBottom:function(e){var s=e.renderer,n=s.$cursorLayer.getPixelPosition(),a=s.$size.scrollerHeight-s.lineHeight,o=s.scrollTop;Math.abs(n.top-o)<2?o=n.top-a:Math.abs(n.top-o-a*.5)<2?o=n.top:o=n.top-a*.5,e.session.setScrollTop(o)},selectRectangularRegion:function(e){e.multiSelect.toggleBlockSelection()},setMark:{exec:function(e,s){if(s&&s.count){e.inMultiSelectMode?e.forEachSelection(p):p(),p();return}var n=e.emacsMark(),a=e.selection.getAllRanges(),o=a.map(function(u){return{row:u.start.row,column:u.start.column}}),f=!0,S=a.every(function(u){return u.isEmpty()});if(f&&(n||!S)){e.inMultiSelectMode?e.forEachSelection({exec:e.clearSelection.bind(e)}):e.clearSelection(),n&&e.pushEmacsMark(null);return}if(!n){o.forEach(function(u){e.pushEmacsMark(u)}),e.setEmacsMark(o[o.length-1]);return}function p(){var u=e.popEmacsMark();u&&e.moveCursorToPosition(u)}},readOnly:!0,handlesCount:!0},exchangePointAndMark:{exec:function(s,n){var a=s.selection;if(!n.count&&!a.isEmpty()){a.setSelectionRange(a.getRange(),!a.isBackwards());return}if(n.count){var o={row:a.lead.row,column:a.lead.column};a.clearSelection(),a.moveCursorToPosition(s.emacsMarkForSelection(o))}else a.selectToPosition(s.emacsMarkForSelection())},readOnly:!0,handlesCount:!0,multiSelectAction:"forEach"},killWord:{exec:function(e,s){e.clearSelection(),s=="left"?e.selection.selectWordLeft():e.selection.selectWordRight();var n=e.getSelectionRange(),a=e.session.getTextRange(n);m.killRing.add(a),e.session.remove(n),e.clearSelection()},multiSelectAction:"forEach"},killLine:function(e){e.pushEmacsMark(null),e.clearSelection();var s=e.getSelectionRange(),n=e.session.getLine(s.start.row);s.end.column=n.length,n=n.substr(s.start.column);var a=e.session.getFoldLine(s.start.row);a&&s.end.row!=a.end.row&&(s.end.row=a.end.row,n="x"),/^\s*$/.test(n)&&(s.end.row++,n=e.session.getLine(s.end.row),s.end.column=/^\s*$/.test(n)?n.length:0);var o=e.session.getTextRange(s);e.prevOp.command==this?m.killRing.append(o):m.killRing.add(o),e.session.remove(s),e.clearSelection()},yank:function(e){e.onPaste(m.killRing.get()||""),e.keyBinding.$data.lastCommand="yank"},yankRotate:function(e){e.keyBinding.$data.lastCommand=="yank"&&(e.undo(),e.session.$emacsMarkRing.pop(),e.onPaste(m.killRing.rotate()),e.keyBinding.$data.lastCommand="yank")},killRegion:{exec:function(e){m.killRing.add(e.getCopyText()),e.commands.byName.cut.exec(e),e.setEmacsMark(null)},readOnly:!0,multiSelectAction:"forEach"},killRingSave:{exec:function(e){e.$handlesEmacsOnCopy=!0;var s=e.session.$emacsMarkRing.slice(),n=[];m.killRing.add(e.getCopyText()),setTimeout(function(){function a(){var o=e.selection,f=o.getRange(),S=o.isBackwards()?f.end:f.start;n.push({row:S.row,column:S.column}),o.clearSelection()}e.$handlesEmacsOnCopy=!1,e.inMultiSelectMode?e.forEachSelection({exec:a}):a(),e.setEmacsMark(null),e.session.$emacsMarkRing=s.concat(n.reverse())},0)},readOnly:!0},keyboardQuit:function(e){e.selection.clearSelection(),e.setEmacsMark(null),e.keyBinding.$data.count=null},focusCommandLine:function(e,s){e.showCommandLine&&e.showCommandLine(s)}}),m.handler.addCommands(k.iSearchStartCommands);var g=m.handler.commands;g.yank.isYank=!0,g.yankRotate.isYank=!0,m.killRing={$data:[],add:function(e){e&&this.$data.push(e),this.$data.length>30&&this.$data.shift()},append:function(e){var s=this.$data.length-1,n=this.$data[s]||"";e&&(n+=e),n&&(this.$data[s]=n)},get:function(e){return e=e||1,this.$data.slice(this.$data.length-e,this.$data.length).reverse().join(`
`)},pop:function(){return this.$data.length>1&&this.$data.pop(),this.get()},rotate:function(){return this.$data.unshift(this.$data.pop()),this.get()}}}),function(){ace.require(["ace/keyboard/emacs"],function(h){typeof module=="object"&&typeof exports=="object"&&module&&(module.exports=h)})}();
